CREATE OR REPLACE FUNCTION update_app_conf(k text, v jsonb) RETURNS void AS $$
    UPDATE app_conf SET value = v WHERE key = k;
$$ LANGUAGE sql;

DO $$
BEGIN
    PERFORM update_app_conf('check_avatar_urls', 'false'::jsonb);
    PERFORM update_app_conf('check_email_domains', 'false'::jsonb);
    PERFORM update_app_conf('payin_methods', '{"*": true}'::jsonb);
    PERFORM update_app_conf('s3_endpoint', '"https://tests.liberapay.org"'::jsonb);
    PERFORM update_app_conf('s3_secret_key', '"fake"'::jsonb);
END;
$$;

DROP FUNCTION update_app_conf(text, jsonb);

INSERT INTO currency_exchange_rates VALUES
    ('EUR', 'USD', 1.2),
    ('USD', 'EUR', 1 / 1.2),
    ('EUR', 'CHF', 1.1),
    ('CHF', 'EUR', 1 / 1.1),
    ('EUR', 'GBP', 0.9),
    ('GBP', 'EUR', 1 / 0.9),
    ('EUR', 'JPY', 125),
    ('JPY', 'EUR', 1 / 125.0),
    ('EUR', 'KRW', 1250),
    ('KRW', 'EUR', 1 / 1250.0),

    ('EUR', 'AED', 3.802052),
    ('AED', 'EUR', 1 / 3.802052),
    ('EUR', 'AFN', 72.674249),
    ('AFN', 'EUR', 1 / 72.674249),
    ('EUR', 'ALL', 97.199333),
    ('ALL', 'EUR', 1 / 97.199333),
    ('EUR', 'AMD', 410.494537),
    ('AMD', 'EUR', 1 / 410.494537),
    ('EUR', 'ANG', 1.864382),
    ('ANG', 'EUR', 1 / 1.864382),
    ('EUR', 'AOA', 944.045474),
    ('AOA', 'EUR', 1 / 944.045474),
    ('EUR', 'ARS', 1067.005511),
    ('ARS', 'EUR', 1 / 1067.005511),
    ('EUR', 'AUD', 1.671181),
    ('AUD', 'EUR', 1 / 1.671181),
    ('EUR', 'AWG', 1.863248),
    ('AWG', 'EUR', 1 / 1.863248),
    ('EUR', 'AZN', 1.758045),
    ('AZN', 'EUR', 1 / 1.758045),
    ('EUR', 'BAM', 1.936462),
    ('BAM', 'EUR', 1 / 1.936462),
    ('EUR', 'BBD', 2.088741),
    ('BBD', 'EUR', 1 / 2.088741),
    ('EUR', 'BDT', 123.624842),
    ('BDT', 'EUR', 1 / 123.624842),
    ('EUR', 'BGN', 1.955789),
    ('BGN', 'EUR', 1 / 1.955789),
    ('EUR', 'BIF', 3059.150251),
    ('BIF', 'EUR', 1 / 3059.150251),
    ('EUR', 'BMD', 1.035138),
    ('BMD', 'EUR', 1 / 1.035138),
    ('EUR', 'BND', 1.402395),
    ('BND', 'EUR', 1 / 1.402395),
    ('EUR', 'BOB', 7.174457),
    ('BOB', 'EUR', 1 / 7.174457),
    ('EUR', 'BRL', 6.522922),
    ('BRL', 'EUR', 1 / 6.522922),
    ('EUR', 'BSD', 1.034469),
    ('BSD', 'EUR', 1 / 1.034469),
    ('EUR', 'BWP', 14.408115),
    ('BWP', 'EUR', 1 / 14.408115),
    ('EUR', 'BYN', 3.385392),
    ('BYN', 'EUR', 1 / 3.385392),
    ('EUR', 'BZD', 2.077949),
    ('BZD', 'EUR', 1 / 2.077949),
    ('EUR', 'CAD', 1.488057),
    ('CAD', 'EUR', 1 / 1.488057),
    ('EUR', 'CDF', 2970.845311),
    ('CDF', 'EUR', 1 / 2970.845311),
    ('EUR', 'CLP', 1028.771544),
    ('CLP', 'EUR', 1 / 1028.771544),
    ('EUR', 'CNY', 7.555574),
    ('CNY', 'EUR', 1 / 7.555574),
    ('EUR', 'COP', 4559.698982),
    ('COP', 'EUR', 1 / 4559.698982),
    ('EUR', 'CRC', 526.937814),
    ('CRC', 'EUR', 1 / 526.937814),
    ('EUR', 'CVE', 109.174221),
    ('CVE', 'EUR', 1 / 109.174221),
    ('EUR', 'CZK', 25.1879),
    ('CZK', 'EUR', 1 / 25.1879),
    ('EUR', 'DJF', 183.964476),
    ('DJF', 'EUR', 1 / 183.964476),
    ('EUR', 'DKK', 7.457774),
    ('DKK', 'EUR', 1 / 7.457774),
    ('EUR', 'DOP', 62.99095),
    ('DOP', 'EUR', 1 / 62.99095),
    ('EUR', 'DZD', 140.52305),
    ('DZD', 'EUR', 1 / 140.52305),
    ('EUR', 'EGP', 52.614912),
    ('EGP', 'EUR', 1 / 52.614912),
    ('EUR', 'ETB', 132.135944),
    ('ETB', 'EUR', 1 / 132.135944),
    ('EUR', 'FJD', 2.403482),
    ('FJD', 'EUR', 1 / 2.403482),
    ('EUR', 'FKP', 0.81981),
    ('FKP', 'EUR', 1 / 0.81981),
    ('EUR', 'GEL', 2.908781),
    ('GEL', 'EUR', 1 / 2.908781),
    ('EUR', 'GIP', 0.81981),
    ('GIP', 'EUR', 1 / 0.81981),
    ('EUR', 'GMD', 74.529722),
    ('GMD', 'EUR', 1 / 74.529722),
    ('EUR', 'GNF', 8941.662231),
    ('GNF', 'EUR', 1 / 8941.662231),
    ('EUR', 'GTQ', 7.976345),
    ('GTQ', 'EUR', 1 / 7.976345),
    ('EUR', 'GYD', 216.431773),
    ('GYD', 'EUR', 1 / 216.431773),
    ('EUR', 'HKD', 8.041038),
    ('HKD', 'EUR', 1 / 8.041038),
    ('EUR', 'HNL', 26.283524),
    ('HNL', 'EUR', 1 / 26.283524),
    ('EUR', 'HTG', 135.180045),
    ('HTG', 'EUR', 1 / 135.180045),
    ('EUR', 'HUF', 410.892779),
    ('HUF', 'EUR', 1 / 410.892779),
    ('EUR', 'IDR', 16869.950469),
    ('IDR', 'EUR', 1 / 16869.950469),
    ('EUR', 'ILS', 3.771136),
    ('ILS', 'EUR', 1 / 3.771136),
    ('EUR', 'INR', 88.979354),
    ('INR', 'EUR', 1 / 88.979354),
    ('EUR', 'ISK', 143.904632),
    ('ISK', 'EUR', 1 / 143.904632),
    ('EUR', 'JMD', 161.021208),
    ('JMD', 'EUR', 1 / 161.021208),
    ('EUR', 'KES', 133.708563),
    ('KES', 'EUR', 1 / 133.708563),
    ('EUR', 'KGS', 90.05673),
    ('KGS', 'EUR', 1 / 90.05673),
    ('EUR', 'KHR', 4162.492209),
    ('KHR', 'EUR', 1 / 4162.492209),
    ('EUR', 'KMF', 482.503569),
    ('KMF', 'EUR', 1 / 482.503569),
    ('EUR', 'KYD', 0.862103),
    ('KYD', 'EUR', 1 / 0.862103),
    ('EUR', 'KZT', 542.858821),
    ('KZT', 'EUR', 1 / 542.858821),
    ('EUR', 'LAK', 22612.186763),
    ('LAK', 'EUR', 1 / 22612.186763),
    ('EUR', 'LBP', 92641.987047),
    ('LBP', 'EUR', 1 / 92641.987047),
    ('EUR', 'LKR', 302.578346),
    ('LKR', 'EUR', 1 / 302.578346),
    ('EUR', 'LRD', 189.309489),
    ('LRD', 'EUR', 1 / 189.309489),
    ('EUR', 'LSL', 19.40452),
    ('LSL', 'EUR', 1 / 19.40452),
    ('EUR', 'MAD', 10.443854),
    ('MAD', 'EUR', 1 / 10.443854),
    ('EUR', 'MDL', 19.034194),
    ('MDL', 'EUR', 1 / 19.034194),
    ('EUR', 'MGA', 4830.758351),
    ('MGA', 'EUR', 1 / 4830.758351),
    ('EUR', 'MKD', 61.207341),
    ('MKD', 'EUR', 1 / 61.207341),
    ('EUR', 'MMK', 3362.087037),
    ('MMK', 'EUR', 1 / 3362.087037),
    ('EUR', 'MNT', 3517.397943),
    ('MNT', 'EUR', 1 / 3517.397943),
    ('EUR', 'MOP', 8.26924),
    ('MOP', 'EUR', 1 / 8.26924),
    ('EUR', 'MUR', 48.640953),
    ('MUR', 'EUR', 1 / 48.640953),
    ('EUR', 'MVR', 15.942382),
    ('MVR', 'EUR', 1 / 15.942382),
    ('EUR', 'MWK', 1793.786617),
    ('MWK', 'EUR', 1 / 1793.786617),
    ('EUR', 'MXN', 21.61204),
    ('MXN', 'EUR', 1 / 21.61204),
    ('EUR', 'MYR', 4.629653),
    ('MYR', 'EUR', 1 / 4.629653),
    ('EUR', 'MZN', 66.149163),
    ('MZN', 'EUR', 1 / 66.149163),
    ('EUR', 'NAD', 19.40452),
    ('NAD', 'EUR', 1 / 19.40452),
    ('EUR', 'NGN', 1600.32287),
    ('NGN', 'EUR', 1 / 1600.32287),
    ('EUR', 'NIO', 38.069821),
    ('NIO', 'EUR', 1 / 38.069821),
    ('EUR', 'NOK', 11.788019),
    ('NOK', 'EUR', 1 / 11.788019),
    ('EUR', 'NPR', 141.589042),
    ('NPR', 'EUR', 1 / 141.589042),
    ('EUR', 'NZD', 1.850294),
    ('NZD', 'EUR', 1 / 1.850294),
    ('EUR', 'PAB', 1.034469),
    ('PAB', 'EUR', 1 / 1.034469),
    ('EUR', 'PEN', 3.877181),
    ('PEN', 'EUR', 1 / 3.877181),
    ('EUR', 'PGK', 4.202017),
    ('PGK', 'EUR', 1 / 4.202017),
    ('EUR', 'PHP', 59.763164),
    ('PHP', 'EUR', 1 / 59.763164),
    ('EUR', 'PKR', 288.073893),
    ('PKR', 'EUR', 1 / 288.073893),
    ('EUR', 'PLN', 4.276941),
    ('PLN', 'EUR', 1 / 4.276941),
    ('EUR', 'PYG', 8085.257777),
    ('PYG', 'EUR', 1 / 8085.257777),
    ('EUR', 'QAR', 3.772805),
    ('QAR', 'EUR', 1 / 3.772805),
    ('EUR', 'RON', 4.973529),
    ('RON', 'EUR', 1 / 4.973529),
    ('EUR', 'RSD', 116.37528),
    ('RSD', 'EUR', 1 / 116.37528),
    ('EUR', 'RUB', 117.717495),
    ('RUB', 'EUR', 1 / 117.717495),
    ('EUR', 'RWF', 1435.345338),
    ('RWF', 'EUR', 1 / 1435.345338),
    ('EUR', 'SAR', 3.888401),
    ('SAR', 'EUR', 1 / 3.888401),
    ('EUR', 'SBD', 8.678134),
    ('SBD', 'EUR', 1 / 8.678134),
    ('EUR', 'SCR', 14.74064),
    ('SCR', 'EUR', 1 / 14.74064),
    ('EUR', 'SEK', 11.453748),
    ('SEK', 'EUR', 1 / 11.453748),
    ('EUR', 'SGD', 1.413486),
    ('SGD', 'EUR', 1 / 1.413486),
    ('EUR', 'SHP', 0.81981),
    ('SHP', 'EUR', 1 / 0.81981),
    ('EUR', 'SLE', 23.602457),
    ('SLE', 'EUR', 1 / 23.602457),
    ('EUR', 'SOS', 591.196108),
    ('SOS', 'EUR', 1 / 591.196108),
    ('EUR', 'SRD', 36.513463),
    ('SRD', 'EUR', 1 / 36.513463),
    ('EUR', 'SZL', 19.389371),
    ('SZL', 'EUR', 1 / 19.389371),
    ('EUR', 'THB', 35.495955),
    ('THB', 'EUR', 1 / 35.495955),
    ('EUR', 'TJS', 11.275535),
    ('TJS', 'EUR', 1 / 11.275535),
    ('EUR', 'TOP', 2.424392),
    ('TOP', 'EUR', 1 / 2.424392),
    ('EUR', 'TRY', 36.608373),
    ('TRY', 'EUR', 1 / 36.608373),
    ('EUR', 'TTD', 7.030788),
    ('TTD', 'EUR', 1 / 7.030788),
    ('EUR', 'TWD', 34.056545),
    ('TWD', 'EUR', 1 / 34.056545),
    ('EUR', 'TZS', 2530.911931),
    ('TZS', 'EUR', 1 / 2530.911931),
    ('EUR', 'UAH', 43.534638),
    ('UAH', 'EUR', 1 / 43.534638),
    ('EUR', 'UGX', 3800.051353),
    ('UGX', 'EUR', 1 / 3800.051353),
    ('EUR', 'UYU', 45.376634),
    ('UYU', 'EUR', 1 / 45.376634),
    ('EUR', 'UZS', 13349.62151),
    ('UZS', 'EUR', 1 / 13349.62151),
    ('EUR', 'VND', 26380.485583),
    ('VND', 'EUR', 1 / 26380.485583),
    ('EUR', 'VUV', 122.893627),
    ('VUV', 'EUR', 1 / 122.893627),
    ('EUR', 'WST', 2.859866),
    ('WST', 'EUR', 1 / 2.859866),
    ('EUR', 'XAF', 649.471153),
    ('XAF', 'EUR', 1 / 649.471153),
    ('EUR', 'XCD', 2.797511),
    ('XCD', 'EUR', 1 / 2.797511),
    ('EUR', 'XOF', 649.468047),
    ('XOF', 'EUR', 1 / 649.468047),
    ('EUR', 'XPF', 119.331742),
    ('XPF', 'EUR', 1 / 119.331742),
    ('EUR', 'YER', 259.172588),
    ('YER', 'EUR', 1 / 259.172588),
    ('EUR', 'ZAR', 19.550693),
    ('ZAR', 'EUR', 1 / 19.550693),
    ('EUR', 'ZMW', 28.81029),
    ('ZMW', 'EUR', 1 / 28.81029)
    ON CONFLICT (source_currency, target_currency) DO UPDATE SET rate = excluded.rate;
